# 外网开发调试及同步内网策略
*创建时间：星期二, 10. 十月 2017 06:16下午*
***更新时间：星期二, 10. 十月 2017 06:17下午***

[TOC]

## 1.下载新版本文件
目的：将服务器新安装的版本代码下载到本地，已方便在本地用熟悉的IDE编辑修改。
关键词：rsync
采用rsync下载服务端代码到本地，命令如下：
```shell
$ 
```
当然在完成以上命令前，需求对rsync进行配置，具体参考...
## 2.配置本地和服务端代码同步
目的：监听本地文件的变化，实时将修改的内容同步到服务端，减少验证问题的过程。
关键词：rsync inotify
配置步骤：

## 3.向内网发送已修改的文件
关键词：find
经过阶段性的修改，不同路径下的多个文件被修改，此时需要找出这些被修改的文件，发送到内网提交trac。
1.找出时间段内修改的文件（包括文件夹）复制到指定的文件夹如按日期命名的20171010；
找到480分钟内修改过的文件，并连带文件的目录结构一起拷贝到20171010这个文件夹下：
```shell
$ cp --parents `find . -type f -mmin -480` ~/20171010
```
2.通过FTP传递文件到内网。

获取修改过的文件的路径并存在txt中
```shell
$ find . -type f -mmin -480 > files.txt
```

拷贝不带目录结构的文件：
```shell
$ cp  `find . -type f -mmin -480` ~/20171010
```

注意：文件传到内网后一定要对比两个文件的不同，不能直接覆盖。